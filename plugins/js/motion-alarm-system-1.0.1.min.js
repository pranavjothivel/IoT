var deviceID = "47004c001051373331333230";
var accessToken = "8a23b62be57f056609e81a244648a257a284d043";
var url = "https://api.particle.io/v1/devices/"+deviceID+"/motion";
var status_url = "https://api.particle.io/v1/devices/"+deviceID+"/status";

function alarmCallback(data, status) {
    if (data.return_value == 2) {
        alert("System Armed");
    }
    else if (data.return_value == 1) {
        alert("System Disarmed");
    }
    else {
        
    }
}

function statusCallback(data, status) {
    // if (status == "success") {
        // var alarmStatus = data.result;
        
        if (data.result == "false") {
            document.getElementById("AlarmStatus").innerHTML="DISARMED";
        }
        else if (data.result == "true") {
            document.getElementById("AlarmStatus").innerHTML="ARMED";
        }
        setInterval(statusRetriever, 1000);
    // }
}
function toggleArm() {
    // status = $("#arm").val();
    $.post(url, {params: "arm", access_token: accessToken}, alarmCallback);
}

function toggleDisarm() {
    // status = $("#disarm").val();
    $.post(url, {params: "disarm", access_token: accessToken}, alarmCallback);
}

function statusRetriever() {
    $.get(status_url, {access_token: accessToken}, statusCallback()); 
}

// statusRetriever();

$(document).ready(statusRetriever());