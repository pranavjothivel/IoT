var deviceID = "47004c001051373331333230";
var accessToken = "6f3236f2330f9d2cf18c2c986897b99d6c08cc30";
var url = "https://api.particle.io/v1/devices/"+deviceID+"/motion";
var status_url = "https://api.particle.io/v1/devices/"+deviceID+"/status";

function alarmCallback(data, status) {
    if (data.return_value == 2) {
        alert("System Armed");
        statusRetriever();
    }
    else if (data.return_value == 1) {
        alert("System Disarmed");
        statusRetriever();
    }
    
    else {
        
    }
}

function statusCallback(data, status) {
    if (status == "success") {
        var alarmStatus = data.result;
        
        if (data.result == "false") {
            document.getElementById("AlarmStatus").innerHTML="DISARMED";
        }
        else if (data.result == "true") {
            document.getElementById("AlarmStatus").innerHTML="ARMED";
        }
        setInterval(statusRetriever, 45000);
    }
}
function toggleArm() {
    // status = $("#arm").val();
    $.post(url, {params: "arm", access_token: accessToken}, alarmCallback);
}

function toggleDisarm() {
    // status = $("#disarm").val();
    $.post(url, {params: "disarm", access_token: accessToken}, alarmCallback);
}

function statusRetriever() {
    $.get(status_url, {access_token: accessToken}, statusCallback()); 
}

// statusRetriever();

$(document).ready(statusRetriever());